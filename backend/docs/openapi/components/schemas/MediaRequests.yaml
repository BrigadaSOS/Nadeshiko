# Media Request Schemas
# Shared field definitions using YAML anchors

MediaFields: &mediaFields
  anilistId:
    type: integer
    description: AniList database ID for the media
    example: 7674
  japaneseName:
    type: string
    description: Original Japanese name of the media
    example: "バクマン。"
  romajiName:
    type: string
    description: Romaji transliteration of the media name
    example: "Bakuman."
  englishName:
    type: string
    description: English translation of the media name
    example: "Bakuman."
  airingFormat:
    type: string
    description: Format of the media release (e.g., TV, OVA, Movie)
    example: "TV"
  airingStatus:
    type: string
    description: Current airing status (FINISHED, RELEASING, NOT_YET_RELEASED, CANCELLED)
    example: "FINISHED"
  genres:
    type: array
    items:
      type: string
    description: List of genres associated with the media
    example: ["Comedy", "Drama", "Romance", "Slice of Life"]
  storage:
    type: string
    enum: [local, r2]
    description: Storage backend for media assets
    example: "r2"
    default: "r2"
  startDate:
    type: string
    format: date
    description: Start date of the media (first airing/release)
    example: "2010-10-02"
  endDate:
    type: string
    format: date
    description: End date of the media (last airing/release)
    example: "2011-04-02"
  category:
    type: string
    enum: [ANIME, JDRAMA]
    description: Media category
    example: "ANIME"
  version:
    type: string
    description: Version of the media-sub-splitter used
    example: "6"
  hashSalt:
    type: string
    description: Hash salt used when generating the hash for the related media assets
    example: "ba0cbe173ed310528f16130273662a60"
  studio:
    type: string
    description: Animation studio that produced the media
    example: "J.C.STAFF"
  seasonName:
    type: string
    description: Season when the media aired (WINTER, SPRING, SUMMER, FALL)
    example: "FALL"
  seasonYear:
    type: integer
    description: Year when the media aired
    example: 2010
  characters:
    type: array
    items:
      $ref: "./CharacterInput.yaml"
    description: List of characters appearing in the media with their voice actors
    default: []
  lists:
    type: array
    items:
      $ref: "./ListInput.yaml"
    description: Lists to add this media to (e.g., series, franchise)
    default: []

# Update-only field (numSegments)
NumSegmentsField: &numSegmentsField
  numSegments:
    type: integer
    description: Total number of subtitle segments available
    example: 1234

MediaCreateRequest:
  type: object
  description: Request body for creating a new media entry
  required:
    - anilistId
    - japaneseName
    - romajiName
    - englishName
    - airingFormat
    - airingStatus
    - genres
    - storage
    - startDate
    - category
    - version
    - hashSalt
    - studio
    - seasonName
    - seasonYear
  properties:
    <<: *mediaFields

MediaUpdateRequest:
  type: object
  description: Request body for updating an existing media entry (all fields optional)
  properties:
    <<: *mediaFields
    <<: *numSegmentsField
